<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@cardinal/token-manager - v2.0.0</title><meta name="description" content="Documentation for @cardinal/token-manager - v2.0.0"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@cardinal/token-manager - v2.0.0</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@cardinal/token-manager - v2.0.0 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#cardinal" id="cardinal" style="color: inherit; text-decoration: none;">
  <h1>Cardinal</h1>
</a>
<p><a href="https://github.com/cardinal-labs/cardinal-token-manager/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-AGPL%203.0-blue" alt="License"></a>
<a href="https://github.com/cardinal-labs/cardinal-token-manager/actions/workflows/release.yml"><img src="https://github.com/cardinal-labs/cardinal-token-manager/actions/workflows/release.yml/badge.svg?branch=v0.0.27" alt="Release"></a></p>
<p align="center">
    <img src="./images/banner.png" />
</p>

<p align="center">
    An open protocol for issuing managed tokens on Solana.
</p>


<a href="#background" id="background" style="color: inherit; text-decoration: none;">
  <h2>Background</h2>
</a>
<p>The Token Manager program is a wrapper protocol that achieves conditional ownership of Solana NFTs. It allows one to issue an NFT to another party with embedded mechanisms for programmatic management of the token while it sits in their wallet. Among others, things like time-based expiration, usage-based expiration, selective transferability, and non-transferability are possible with the Token Manager. Its modular design uses “plugin” invalidators, approval authorities, and transfer authorities modeled as separate smart contracts to allow for theoretically any custom invalidation, claiming, and transfer logic tied to on-chain data. We currently offer two out-of-the-box invalidator plugins to support basic time and usage-based expiration as well as a basic payment-based claim approver.</p>

<a href="#packages" id="packages" style="color: inherit; text-decoration: none;">
  <h2>Packages</h2>
</a>
<table>
<thead>
<tr>
<th align="left">Package</th>
<th align="left">Description</th>
<th align="left">Version</th>
<th align="left">Docs</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>cardinal-token-manager</code></td>
<td align="left">Manages conditionally owned tokens</td>
<td align="left"><a href="https://crates.io/crates/cardinal-token-manager"><img src="https://img.shields.io/crates/v/cardinal-token-manager" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-token-manager"><img src="https://docs.rs/cardinal-token-manager/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-paid-claim-approver</code></td>
<td align="left">Approves users to claim tokens from a token-manager</td>
<td align="left"><a href="https://crates.io/crates/cardinal-paid-claim-approver"><img src="https://img.shields.io/crates/v/cardinal-paid-claim-approver" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-paid-claim-approver"><img src="https://docs.rs/cardinal-paid-claim-approver/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-time-invalidator</code></td>
<td align="left">Invalidator for time-based token-managers</td>
<td align="left"><a href="https://crates.io/crates/cardinal-time-invalidator"><img src="https://img.shields.io/crates/v/cardinal-time-invalidator" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-time-invalidator"><img src="https://docs.rs/cardinal-time-invalidator/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-use-invalidator</code></td>
<td align="left">Invalidator for use-based token-managers</td>
<td align="left"><a href="https://crates.io/crates/cardinal-use-invalidator"><img src="https://img.shields.io/crates/v/cardinal-use-invalidator" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-use-invalidator"><img src="https://docs.rs/cardinal-use-invalidator/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-payment-manager</code></td>
<td align="left">Handles payment splits and revenue sharing</td>
<td align="left"><a href="https://crates.io/crates/cardinal-payment-manager"><img src="https://img.shields.io/crates/v/cardinal-payment-manager" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-payment-manager"><img src="https://docs.rs/cardinal-payment-manager/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>@cardinal/token-manager</code></td>
<td align="left">TypeScript SDK for token-manager</td>
<td align="left"><a href="https://www.npmjs.com/package/@cardinal/token-manager"><img src="https://img.shields.io/npm/v/@cardinal/token-manager.svg" alt="npm"></a></td>
<td align="left"><a href="https://cardinal-labs.github.io/cardinal-token-manager/"><img src="https://img.shields.io/badge/docs-typedoc-blue" alt="Docs"></a></td>
</tr>
</tbody></table>

<a href="#addresses" id="addresses" style="color: inherit; text-decoration: none;">
  <h2>Addresses</h2>
</a>
<p>Program addresses are the same on devnet, testnet, and mainnet-beta.</p>
<ul>
<li>TokenManager: <a href="https://explorer.solana.com/address/mgr99QFMYByTqGPWmNqunV7vBLmWWXdSrHUfV8Jf3JM"><code>mgr99QFMYByTqGPWmNqunV7vBLmWWXdSrHUfV8Jf3JM</code></a></li>
<li>PaidClaimApprover: <a href="https://explorer.solana.com/address/pcaBwhJ1YHp7UDA7HASpQsRUmUNwzgYaLQto2kSj1fR"><code>pcaBwhJ1YHp7UDA7HASpQsRUmUNwzgYaLQto2kSj1fR</code></a></li>
<li>TimeInvalidator: <a href="https://explorer.solana.com/address/tmeEDp1RgoDtZFtx6qod3HkbQmv9LMe36uqKVvsLTDE"><code>tmeEDp1RgoDtZFtx6qod3HkbQmv9LMe36uqKVvsLTDE</code></a></li>
<li>UseInvalidator: <a href="https://explorer.solana.com/address/useZ65tbyvWpdYCLDJaegGK34Lnsi8S3jZdwx8122qp"><code>useZ65tbyvWpdYCLDJaegGK34Lnsi8S3jZdwx8122qp</code></a></li>
</ul>

<a href="#plugins" id="plugins" style="color: inherit; text-decoration: none;">
  <h2>Plugins</h2>
</a>
<p>Cardinal token-manager is made to be composable. It allows for plugins for</p>
<ol>
<li>Claim approvers</li>
<li>Transfer authorities</li>
<li>Invalidators</li>
<li>Payment manager</li>
</ol>
<p>When instantiating a token-manager, the issuer can set a claim approver, transfer authority and invalidators that can control the claim, transfer and invalidate mechanisms. These are all plugins that can be pointed to any program-derived account or user owned account. Out of the box, there are basic plugins to power use and time rentals and subscriptions.</p>
<p>All of these are modeled are separate programs so users can choose to implement custom logic in a separate program for claim, transfer and invalidation. Payment manager handles payment splits for all payments associated with the programs and also has built in support for paying out creator royalties.</p>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h1>Documentation</h1>
</a>

<a href="#invalidation-types" id="invalidation-types" style="color: inherit; text-decoration: none;">
  <h2>Invalidation Types</h2>
</a>
<p>The program generalizes the concept of invalidation into a list of invalidators so any of those public keys can trigger the invalidation of the token. The invalidation type field is used to specify &quot;what happens&quot; when invalidation is triggered.</p>
<pre><code><span class="hl-0">#[</span><span class="hl-1">derive</span><span class="hl-0">(</span><span class="hl-2">Clone</span><span class="hl-0">, </span><span class="hl-2">Debug</span><span class="hl-0">, </span><span class="hl-2">PartialEq</span><span class="hl-0">, </span><span class="hl-2">AnchorSerialize</span><span class="hl-0">, </span><span class="hl-2">AnchorDeserialize</span><span class="hl-0">)]</span><br/><span class="hl-0">#[</span><span class="hl-1">repr</span><span class="hl-0">(</span><span class="hl-2">u8</span><span class="hl-0">)]</span><br/><span class="hl-2">pub</span><span class="hl-0"> </span><span class="hl-3">enum</span><span class="hl-0"> </span><span class="hl-4">InvalidationType</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">/// Upon invalidation it will be returned to the issuer</span><br/><span class="hl-0">    </span><span class="hl-6">Return</span><span class="hl-0"> = </span><span class="hl-7">1</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">/// Upon invalidation it will remain marked as invalid</span><br/><span class="hl-0">    </span><span class="hl-6">Invalidate</span><span class="hl-0"> = </span><span class="hl-7">2</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">/// Upon invalidation the token manager will be deleted and thus the tokens are released</span><br/><span class="hl-0">    </span><span class="hl-6">Release</span><span class="hl-0"> = </span><span class="hl-7">3</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">/// Upon invalidation the token manager will be reset back to issued state</span><br/><span class="hl-0">    </span><span class="hl-6">Reissue</span><span class="hl-0"> = </span><span class="hl-7">4</span><span class="hl-0">,</span><br/><span class="hl-0">}</span>
</code></pre>

<a href="#claim-authority" id="claim-authority" style="color: inherit; text-decoration: none;">
  <h2>Claim Authority</h2>
</a>
<p>The concept of claim_authority allows for the issuer to specify specific public key that can approve claiming of the tokens. This can be used in a few contexts.</p>
<ol>
<li>using Keypair.generate() to create a new private key and embed that into a URL as a one-time password. This allows only the recipient of this URL to claim the token. This provides an easy way to distribute tokens via off-chain systems like email.</li>
<li>Paid claim approver, a program that is provided out of the box to enforce payment of a specified mint before claiming</li>
<li>Checking ownership of a given NFT or token to only allow holders, members in DAOs etc to claim the token.</li>
<li>Many, many more!</li>
</ol>
<p>If not set, this token can be claimed by anyone.</p>

<a href="#transfer-authority" id="transfer-authority" style="color: inherit; text-decoration: none;">
  <h2>Transfer Authority</h2>
</a>
<p>Similar to claim_authority, but a specified publickey that can approve transfer of this token. Because the tokens by default are frozen, normal transfer does not work. Instead a transfer_authority can be used to allow transfers to specified wallet. By default, transfer_authority is set to the token_manager itself, rendering it non-transferable. If unset, the token can be freely transferred. The transfer is modeled by receiving a transfer_receipt that can be used to claim the token. Use cases of transfer_authority can include</p>
<ol>
<li>A system that groups wallets together allowing transfer between &quot;known&quot; wallets all owned by the same user</li>
<li>Encoding a transfer schedule in a program on-chain to approve a rotation of the token, similar to a time-share.</li>
<li>A paid transfer that allows someone to pay some amount to the current holder in order to get approved for transfer</li>
<li>KYC approval required before transfer</li>
<li>Transfer between members of a DAO / multi-sig</li>
<li>...</li>
</ol>
<p>NOTE: Once approved for transfer, the approved party can claim the token from the current holder. This is due to the fact that as a recipient (new holder) you must sign the transaction to &quot;accept&quot; the tokens, because part of this process involved delegating the tokens back to the token-manager. This means that approved parties can effectively &quot;take&quot; the token from the current holder.</p>

<a href="#receipts" id="receipts" style="color: inherit; text-decoration: none;">
  <h2>Receipts</h2>
</a>
<p>The concept of receipts allows the issuer of token(s) into a token-manager to mint a receipt NFT representing this token-manager. Coupled with InvalidationType::Return above, the receipt can be freely traded and represent the public key that the token(s) will be returned to when they are invalidated. This essentially represents the underlying asset during outstanding rentals.</p>
<ul>
<li>Receipts are dynamically minted using the image-generator in <a href="https://github.com/cardinal-labs/cardinal-generator">https://github.com/cardinal-labs/cardinal-generator</a>. This allows it to be completely on-chain NFT</li>
<li>Receipts are freely tradeable and represent the underlying asset for outstanding rentals.</li>
<li>Receipts will become expired after the rental is over, This means the user must manual follow the links in the description to burn the expired receipt.</li>
</ul>

<a href="#token-manager-erd" id="token-manager-erd" style="color: inherit; text-decoration: none;">
  <h2>Token Manager ERD</h2>
</a>
<img width="877" alt="DIAGRAM" src="https://user-images.githubusercontent.com/7113086/157140752-02983b0d-3501-42dd-add6-ea29fa37be80.png">
View Online: https://dbdiagram.io/d/6226977961d06e6eadbc77be

<p>Documentation is a work in progress. For now, one should read <a href="https://github.com/cardinal-labs/cardinal-token-manager/blob/main/tests/issueUnissue.spec.ts">the tests</a>.</p>
<p>We soon plan on releasing a React library to make it easy to integrate Cardinal ui components with your frontend.</p>

<a href="#example-usage" id="example-usage" style="color: inherit; text-decoration: none;">
  <h2>Example usage</h2>
</a>

<a href="#all-token-issue-parameters" id="all-token-issue-parameters" style="color: inherit; text-decoration: none;">
  <h4>All token issue parameters</h4>
</a>
<pre><code class="language-js"><span class="hl-8">export</span><span class="hl-0"> </span><span class="hl-3">type</span><span class="hl-0"> </span><span class="hl-4">IssueParameters</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-5">// Mint of the tokens this token manager will manager</span><br/><span class="hl-0">  </span><span class="hl-2">mint</span><span class="hl-0">: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Amoun of tokens to put into token manager, for NFTs this should use the default of 1</span><br/><span class="hl-0">  </span><span class="hl-2">amount</span><span class="hl-0">?: </span><span class="hl-4">BN</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Token account where the token is currently held</span><br/><span class="hl-0">  </span><span class="hl-2">issuerTokenAccountId</span><span class="hl-0">: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Whether anyone can claim this or only the specified person with the link</span><br/><span class="hl-0">  </span><span class="hl-2">visibility</span><span class="hl-0">?: </span><span class="hl-9">&quot;private&quot;</span><span class="hl-0"> | </span><span class="hl-9">&quot;public&quot;</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// What kind of token manager this is</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Token a managed rental and will use freeze authority to manage the token</span><br/><span class="hl-0">  </span><span class="hl-5">// Managed = 1,</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Token is unmanaged and can be traded freely until expiration</span><br/><span class="hl-0">  </span><span class="hl-5">// Unmanaged = 2,</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Token is a metaplex edition and so it uses metaplex program to freeze</span><br/><span class="hl-0">  </span><span class="hl-5">// Edition = 3,</span><br/><span class="hl-0">  </span><span class="hl-2">kind</span><span class="hl-0">?: </span><span class="hl-4">TokenManagerKind</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Optional parameters to specify an up front payment that must be paid before claim</span><br/><span class="hl-0">  </span><span class="hl-2">claimPayment</span><span class="hl-0">?: {</span><br/><span class="hl-0">    </span><span class="hl-5">// Mint of the tokens required for payment</span><br/><span class="hl-0">    </span><span class="hl-2">paymentMint</span><span class="hl-0">: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Amount of the tokens required for payment</span><br/><span class="hl-0">    </span><span class="hl-2">paymentAmount</span><span class="hl-0">: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">  },</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Optional parameters to expire this token manager based on time</span><br/><span class="hl-0">  </span><span class="hl-2">timeInvalidation</span><span class="hl-0">?: {</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional payment manager to handle payment splits if multiple parties involved - should be a PDA initialized by payment manager program</span><br/><span class="hl-0">    </span><span class="hl-2">paymentManager</span><span class="hl-0">?: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional duration after token is claimed in seconds</span><br/><span class="hl-0">    </span><span class="hl-2">durationSeconds</span><span class="hl-0">?: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional exact fixed expiration in UTC seconds, not to be used along with durationSeconds</span><br/><span class="hl-0">    </span><span class="hl-2">maxExpiration</span><span class="hl-0">?: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional extension parameters to extend duration</span><br/><span class="hl-0">    </span><span class="hl-2">extension</span><span class="hl-0">?: {</span><br/><span class="hl-0">      </span><span class="hl-5">// The amount rate needed for extension</span><br/><span class="hl-0">      </span><span class="hl-2">extensionPaymentAmount</span><span class="hl-0">: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// The duration added based on amount paid</span><br/><span class="hl-0">      </span><span class="hl-2">extensionDurationSeconds</span><span class="hl-0">: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// The mint to accept payment for extension</span><br/><span class="hl-0">      </span><span class="hl-2">paymentMint</span><span class="hl-0">: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// Whether this rental allows for partial extension or only in increments of extensionDurationSeconds</span><br/><span class="hl-0">      </span><span class="hl-2">disablePartialExtension</span><span class="hl-0">?: </span><span class="hl-4">boolean</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Optional parameters to expire this token manager based on usage</span><br/><span class="hl-0">  </span><span class="hl-2">useInvalidation</span><span class="hl-0">?: {</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional payment manager to handle payment splits if multiple parties involved - should be a PDA initialized by payment manager program</span><br/><span class="hl-0">    </span><span class="hl-2">paymentManager</span><span class="hl-0">?: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional total usages allocated</span><br/><span class="hl-0">    </span><span class="hl-2">totalUsages</span><span class="hl-0">?: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional use authority who can use this token</span><br/><span class="hl-0">    </span><span class="hl-2">useAuthority</span><span class="hl-0">?: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">// Optional extension parameters to extend usages</span><br/><span class="hl-0">    </span><span class="hl-2">extension</span><span class="hl-0">?: {</span><br/><span class="hl-0">      </span><span class="hl-5">// Number of usages to extend for this payment amount</span><br/><span class="hl-0">      </span><span class="hl-2">extensionUsages</span><span class="hl-0">: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// The mint to accept payment for extension</span><br/><span class="hl-0">      </span><span class="hl-2">extensionPaymentMint</span><span class="hl-0">: </span><span class="hl-4">PublicKey</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// The amount needed to extend usages</span><br/><span class="hl-0">      </span><span class="hl-2">extensionPaymentAmount</span><span class="hl-0">: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">      </span><span class="hl-5">// Optional limit for how many usages can be extended</span><br/><span class="hl-0">      </span><span class="hl-2">maxUsages</span><span class="hl-0">?: </span><span class="hl-4">number</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// What happens to the token upon invalidation</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Upon invalidation it will be returned to the issuer</span><br/><span class="hl-0">  </span><span class="hl-5">// Return = 1,</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Upon invalidation it will remain marked as invalid</span><br/><span class="hl-0">  </span><span class="hl-5">// Invalidate = 2,</span><br/><span class="hl-0">  </span><span class="hl-5">// /// Upon invalidation the token manager will be deleted and thus the tokens are released</span><br/><span class="hl-0">  </span><span class="hl-5">// Release = 3,</span><br/><span class="hl-0">  </span><span class="hl-2">invalidationType</span><span class="hl-0">?: </span><span class="hl-4">InvalidationType</span><span class="hl-0">,</span><br/><br/><span class="hl-0">  </span><span class="hl-5">// Whether the issuer wants to claim a receipt NFT from their rental - this receipt allows the issuer to trade the underlying asset and future rental income</span><br/><span class="hl-0">  </span><span class="hl-2">receipt</span><span class="hl-0">?: </span><span class="hl-4">boolean</span><span class="hl-0">,</span><br/><span class="hl-0">};</span>
</code></pre>
<hr>
<p>&nbsp;</p>


<a href="#javascript-create-fixed-price-24h-rental" id="javascript-create-fixed-price-24h-rental" style="color: inherit; text-decoration: none;">
  <h3>Javascript create fixed price 24h rental</h3>
</a>
<pre><code><span class="hl-2">npm</span><span class="hl-0"> </span><span class="hl-2">i</span><span class="hl-0"> @</span><span class="hl-2">cardinal</span><span class="hl-0">/</span><span class="hl-2">token</span><span class="hl-0">-</span><span class="hl-2">manager</span>
</code></pre>
<pre><code class="language-javascript"><span class="hl-8">import</span><span class="hl-0"> { </span><span class="hl-2">Connection</span><span class="hl-0"> } </span><span class="hl-8">from</span><span class="hl-0"> </span><span class="hl-9">&quot;@solana/web3.js&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">// payment amount 10 for duration of 86400 seconds (24 hours)</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">issueTokenParameters</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-2">paymentAmount:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">BN</span><span class="hl-0">(</span><span class="hl-7">10</span><span class="hl-0">),</span><br/><span class="hl-0">  </span><span class="hl-2">paymentMint:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">PublicKey</span><span class="hl-0">(</span><span class="hl-9">&quot;...&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">  </span><span class="hl-2">durationSeconds:</span><span class="hl-0"> </span><span class="hl-7">86400</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">mint:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">PublicKey</span><span class="hl-0">(</span><span class="hl-9">&quot;...&quot;</span><span class="hl-0">), </span><span class="hl-5">// NFT rental mint</span><br/><span class="hl-0">  </span><span class="hl-2">issuerTokenAccountId:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">PublicKey</span><span class="hl-0">(</span><span class="hl-9">&quot;...&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">  </span><span class="hl-2">visibility:</span><span class="hl-0"> </span><span class="hl-9">&quot;public&quot;</span><span class="hl-0">, </span><span class="hl-5">// default public means anyone can claim this rental</span><br/><span class="hl-0">  </span><span class="hl-2">kind:</span><span class="hl-0"> </span><span class="hl-2">TokenManagerKind</span><span class="hl-0">.</span><span class="hl-2">Edition</span><span class="hl-0">, </span><span class="hl-5">// used for metaplex master / editions,</span><br/><span class="hl-0">  </span><span class="hl-2">invalidationType:</span><span class="hl-0"> </span><span class="hl-2">InvalidationType</span><span class="hl-0">.</span><span class="hl-2">Return</span><span class="hl-0">, </span><span class="hl-5">// indicates this token will be returned when invalidated</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-8">try</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">const</span><span class="hl-0"> [</span><span class="hl-6">transaction</span><span class="hl-0">] = </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-1">issueToken</span><span class="hl-0">(</span><span class="hl-2">issueTokenParameters</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-2">feePayer</span><span class="hl-0"> = </span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">publicKey</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">recentBlockhash</span><span class="hl-0"> = (</span><br/><span class="hl-0">    </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-1">getRecentBlockhash</span><span class="hl-0">(</span><span class="hl-9">&quot;max&quot;</span><span class="hl-0">)</span><br/><span class="hl-0">  ).</span><span class="hl-2">blockhash</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">sign</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">, </span><span class="hl-2">masterEditionMint</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-1">sendAndConfirmRawTransaction</span><span class="hl-0">(</span><span class="hl-2">connection</span><span class="hl-0">, </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">serialize</span><span class="hl-0">(), {</span><br/><span class="hl-0">    </span><span class="hl-2">commitment:</span><span class="hl-0"> </span><span class="hl-9">&quot;confirmed&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">} </span><span class="hl-8">catch</span><span class="hl-0"> (</span><span class="hl-2">exception</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-5">// handle exception</span><br/><span class="hl-0">}</span>
</code></pre>
<hr>
<p>&nbsp;</p>


<a href="#javascript-create-single-use-ticket-example" id="javascript-create-single-use-ticket-example" style="color: inherit; text-decoration: none;">
  <h3>Javascript create single use ticket example</h3>
</a>
<pre><code><span class="hl-2">npm</span><span class="hl-0"> </span><span class="hl-2">i</span><span class="hl-0"> @</span><span class="hl-2">cardinal</span><span class="hl-0">/</span><span class="hl-2">token</span><span class="hl-0">-</span><span class="hl-2">manager</span>
</code></pre>
<pre><code class="language-javascript"><span class="hl-8">import</span><span class="hl-0"> { </span><span class="hl-2">Connection</span><span class="hl-0"> } </span><span class="hl-8">from</span><span class="hl-0"> </span><span class="hl-9">&quot;@solana/web3.js&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">// no payment specified, 1 usage and private link means only the holder of the link can claim it</span><br/><span class="hl-5">// Releases on use as a memento</span><br/><span class="hl-3">const</span><span class="hl-0"> </span><span class="hl-6">issueTokenParameters</span><span class="hl-0"> = {</span><br/><span class="hl-0">  </span><span class="hl-2">useInvalidation:</span><span class="hl-0"> { </span><span class="hl-2">totalUsages:</span><span class="hl-0"> </span><span class="hl-7">1</span><span class="hl-0"> }, </span><span class="hl-5">// 1 use</span><br/><span class="hl-0">  </span><span class="hl-2">mint:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">PublicKey</span><span class="hl-0">(</span><span class="hl-9">&quot;...&quot;</span><span class="hl-0">), </span><span class="hl-5">// ticket mint</span><br/><span class="hl-0">  </span><span class="hl-2">issuerTokenAccountId:</span><span class="hl-0"> </span><span class="hl-3">new</span><span class="hl-0"> </span><span class="hl-1">PublicKey</span><span class="hl-0">(</span><span class="hl-9">&quot;...&quot;</span><span class="hl-0">),</span><br/><span class="hl-0">  </span><span class="hl-2">visibility:</span><span class="hl-0"> </span><span class="hl-9">&quot;private&quot;</span><span class="hl-0">, </span><span class="hl-5">// private so you can send this out via email</span><br/><span class="hl-0">  </span><span class="hl-2">kind:</span><span class="hl-0"> </span><span class="hl-2">TokenManagerKind</span><span class="hl-0">.</span><span class="hl-2">Edition</span><span class="hl-0">, </span><span class="hl-5">// used for metaplex master / editions,</span><br/><span class="hl-0">  </span><span class="hl-2">invalidationType:</span><span class="hl-0"> </span><span class="hl-2">InvalidationType</span><span class="hl-0">.</span><span class="hl-2">Release</span><span class="hl-0">, </span><span class="hl-5">// indicates this token will be released after being used</span><br/><span class="hl-0">};</span><br/><br/><span class="hl-8">try</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-3">const</span><span class="hl-0"> [</span><span class="hl-6">transaction</span><span class="hl-0">] = </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-1">issueToken</span><span class="hl-0">(</span><span class="hl-2">issueTokenParameters</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-2">feePayer</span><span class="hl-0"> = </span><span class="hl-2">wallet</span><span class="hl-0">.</span><span class="hl-2">publicKey</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">recentBlockhash</span><span class="hl-0"> = (</span><br/><span class="hl-0">    </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-2">connection</span><span class="hl-0">.</span><span class="hl-1">getRecentBlockhash</span><span class="hl-0">(</span><span class="hl-9">&quot;max&quot;</span><span class="hl-0">)</span><br/><span class="hl-0">  ).</span><span class="hl-2">blockhash</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">sign</span><span class="hl-0">(</span><span class="hl-2">wallet</span><span class="hl-0">, </span><span class="hl-2">masterEditionMint</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-8">await</span><span class="hl-0"> </span><span class="hl-1">sendAndConfirmRawTransaction</span><span class="hl-0">(</span><span class="hl-2">connection</span><span class="hl-0">, </span><span class="hl-2">transaction</span><span class="hl-0">.</span><span class="hl-1">serialize</span><span class="hl-0">(), {</span><br/><span class="hl-0">    </span><span class="hl-2">commitment:</span><span class="hl-0"> </span><span class="hl-9">&quot;confirmed&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  });</span><br/><span class="hl-0">} </span><span class="hl-8">catch</span><span class="hl-0"> (</span><span class="hl-2">exception</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-5">// handle exception</span><br/><span class="hl-0">}</span>
</code></pre>
<hr>
<p>&nbsp;</p>


<a href="#image-generator" id="image-generator" style="color: inherit; text-decoration: none;">
  <h2>Image generator</h2>
</a>
<p>Cardinal also provides an image generator API. You provide your NFT metadata and image, or a URL to where its hosted, and use the url <code>https://api.cardinal.so/metadata/{mintId}</code> when minting the token and the API will dynamically update the image and metadata based on usages or expiration associated with it so that its always up to date forever and wherever it is viewed.</p>
<p>Reach out to <a href="mailto:team@cardinal.so">team@cardinal.so</a> if you are interested in using this service.</p>
<hr>
<p>&nbsp;</p>


<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p>Cardinal Protocol is licensed under the GNU Affero General Public License v3.0.</p>
<p>In short, this means that any changes to this code must be made open source and available under the AGPL-v3.0 license, even if only used privately.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/claimLinks.html">claim<wbr/>Links</a></li><li class=" tsd-kind-namespace"><a href="modules/programs.html">programs</a></li><li class=" tsd-kind-namespace"><a href="modules/rentals.html">rentals</a></li><li class=" tsd-kind-namespace"><a href="modules/wrappedSol.html">wrapped<wbr/>Sol</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#AccountData" class="tsd-kind-icon">Account<wbr/>Data</a></li><li class="tsd-kind-type-alias"><a href="modules.html#IssueParameters" class="tsd-kind-icon">Issue<wbr/>Parameters</a></li><li class="tsd-kind-function"><a href="modules.html#claimToken" class="tsd-kind-icon">claim<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#emptyWallet" class="tsd-kind-icon">empty<wbr/>Wallet</a></li><li class="tsd-kind-function"><a href="modules.html#extendExpiration" class="tsd-kind-icon">extend<wbr/>Expiration</a></li><li class="tsd-kind-function"><a href="modules.html#extendUsages" class="tsd-kind-icon">extend<wbr/>Usages</a></li><li class="tsd-kind-function"><a href="modules.html#findAta" class="tsd-kind-icon">find<wbr/>Ata</a></li><li class="tsd-kind-function"><a href="modules.html#invalidate" class="tsd-kind-icon">invalidate</a></li><li class="tsd-kind-function"><a href="modules.html#issueToken" class="tsd-kind-icon">issue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#release" class="tsd-kind-icon">release</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#tryGetAccount" class="tsd-kind-icon">try<wbr/>Get<wbr/>Account</a></li><li class="tsd-kind-function"><a href="modules.html#unissueToken" class="tsd-kind-icon">unissue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#useTransaction" class="tsd-kind-icon">use<wbr/>Transaction</a></li><li class="tsd-kind-function"><a href="modules.html#withAcceptListing" class="tsd-kind-icon">with<wbr/>Accept<wbr/>Listing</a></li><li class="tsd-kind-function"><a href="modules.html#withAcceptTransfer" class="tsd-kind-icon">with<wbr/>Accept<wbr/>Transfer</a></li><li class="tsd-kind-function"><a href="modules.html#withCancelTransfer" class="tsd-kind-icon">with<wbr/>Cancel<wbr/>Transfer</a></li><li class="tsd-kind-function"><a href="modules.html#withClaimToken" class="tsd-kind-icon">with<wbr/>Claim<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withCreateListing" class="tsd-kind-icon">with<wbr/>Create<wbr/>Listing</a></li><li class="tsd-kind-function"><a href="modules.html#withDelegate" class="tsd-kind-icon">with<wbr/>Delegate</a></li><li class="tsd-kind-function"><a href="modules.html#withExtendExpiration" class="tsd-kind-icon">with<wbr/>Extend<wbr/>Expiration</a></li><li class="tsd-kind-function"><a href="modules.html#withExtendUsages" class="tsd-kind-icon">with<wbr/>Extend<wbr/>Usages</a></li><li class="tsd-kind-function"><a href="modules.html#withFindOrInitAssociatedTokenAccount" class="tsd-kind-icon">with<wbr/>Find<wbr/>Or<wbr/>Init<wbr/>Associated<wbr/>Token<wbr/>Account</a></li><li class="tsd-kind-function"><a href="modules.html#withInitMarketplace" class="tsd-kind-icon">with<wbr/>Init<wbr/>Marketplace</a></li><li class="tsd-kind-function"><a href="modules.html#withInitTransfer" class="tsd-kind-icon">with<wbr/>Init<wbr/>Transfer</a></li><li class="tsd-kind-function"><a href="modules.html#withInitTransferAuthority" class="tsd-kind-icon">with<wbr/>Init<wbr/>Transfer<wbr/>Authority</a></li><li class="tsd-kind-function"><a href="modules.html#withInvalidate" class="tsd-kind-icon">with<wbr/>Invalidate</a></li><li class="tsd-kind-function"><a href="modules.html#withIssueToken" class="tsd-kind-icon">with<wbr/>Issue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withRelease" class="tsd-kind-icon">with<wbr/>Release</a></li><li class="tsd-kind-function"><a href="modules.html#withRemoveListing" class="tsd-kind-icon">with<wbr/>Remove<wbr/>Listing</a></li><li class="tsd-kind-function"><a href="modules.html#withResetExpiration" class="tsd-kind-icon">with<wbr/>Reset<wbr/>Expiration</a></li><li class="tsd-kind-function"><a href="modules.html#withReturn" class="tsd-kind-icon">with<wbr/>Return</a></li><li class="tsd-kind-function"><a href="modules.html#withSend" class="tsd-kind-icon">with<wbr/>Send</a></li><li class="tsd-kind-function"><a href="modules.html#withTransfer" class="tsd-kind-icon">with<wbr/>Transfer</a></li><li class="tsd-kind-function"><a href="modules.html#withUndelegate" class="tsd-kind-icon">with<wbr/>Undelegate</a></li><li class="tsd-kind-function"><a href="modules.html#withUnissueToken" class="tsd-kind-icon">with<wbr/>Unissue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withUpdateListing" class="tsd-kind-icon">with<wbr/>Update<wbr/>Listing</a></li><li class="tsd-kind-function"><a href="modules.html#withUpdateMarketplace" class="tsd-kind-icon">with<wbr/>Update<wbr/>Marketplace</a></li><li class="tsd-kind-function"><a href="modules.html#withUpdateMaxExpiration" class="tsd-kind-icon">with<wbr/>Update<wbr/>Max<wbr/>Expiration</a></li><li class="tsd-kind-function"><a href="modules.html#withUpdateTransferAuthority" class="tsd-kind-icon">with<wbr/>Update<wbr/>Transfer<wbr/>Authority</a></li><li class="tsd-kind-function"><a href="modules.html#withUse" class="tsd-kind-icon">with<wbr/>Use</a></li><li class="tsd-kind-function"><a href="modules.html#withWhitelistMarektplaces" class="tsd-kind-icon">with<wbr/>Whitelist<wbr/>Marektplaces</a></li><li class="tsd-kind-function"><a href="modules.html#withWrapToken" class="tsd-kind-icon">with<wbr/>Wrap<wbr/>Token</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>